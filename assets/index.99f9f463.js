(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function ye(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $={exports:{}},se;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/se=function(){var t={},e={};return t.on=function(n,a){var r={name:n,handler:a};return e[n]=e[n]||[],e[n].unshift(r),r},t.off=function(n){var a=e[n.name].indexOf(n);a!==-1&&e[n.name].splice(a,1)},t.trigger=function(n,a){var r=e[n],o;if(r)for(o=r.length;o--;)r[o].handler(a)},t};var pe=se,z={exports:{}},ge=function(e,n,a){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");typeof n=="function"&&(a=n,n={}),n=n||{},a=a||function(){},o.type=n.type||"text/javascript",o.charset=n.charset||"utf8",o.async="async"in n?!!n.async:!0,o.src=e,n.attrs&&me(o,n.attrs),n.text&&(o.text=""+n.text);var d="onload"in o?ue:ve;d(o,a),o.onload||ue(o,a),r.appendChild(o)};function me(t,e){for(var n in e)t.setAttribute(n,e[n])}function ue(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function ve(t,e){t.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,e(null,t))}}(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=ge,a=r(n);function r(o){return o&&o.__esModule?o:{default:o}}e.default=function(o){var d=new Promise(function(w){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){w(window.YT);return}else{var s=window.location.protocol==="http:"?"http:":"https:";(0,a.default)(s+"//www.youtube.com/iframe_api",function(i){i&&o.trigger("error",i)})}var l=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){l&&l(),w(window.YT)}});return d},t.exports=e.default})(z,z.exports);var G={exports:{}},J={exports:{}},W={exports:{}},R=1e3,Y=R*60,V=Y*60,F=V*24,he=F*365.25,we=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return Ee(t);if(n==="number"&&isNaN(t)===!1)return e.long?Se(t):be(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Ee(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!!e){var n=parseFloat(e[1]),a=(e[2]||"ms").toLowerCase();switch(a){case"years":case"year":case"yrs":case"yr":case"y":return n*he;case"days":case"day":case"d":return n*F;case"hours":case"hour":case"hrs":case"hr":case"h":return n*V;case"minutes":case"minute":case"mins":case"min":case"m":return n*Y;case"seconds":case"second":case"secs":case"sec":case"s":return n*R;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function be(t){return t>=F?Math.round(t/F)+"d":t>=V?Math.round(t/V)+"h":t>=Y?Math.round(t/Y)+"m":t>=R?Math.round(t/R)+"s":t+"ms"}function Se(t){return U(t,F,"day")||U(t,V,"hour")||U(t,Y,"minute")||U(t,R,"second")||t+" ms"}function U(t,e,n){if(!(t<e))return t<e*1.5?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}(function(t,e){e=t.exports=r.debug=r.default=r,e.coerce=s,e.disable=d,e.enable=o,e.enabled=w,e.humanize=we,e.names=[],e.skips=[],e.formatters={};var n;function a(l){var i=0,u;for(u in l)i=(i<<5)-i+l.charCodeAt(u),i|=0;return e.colors[Math.abs(i)%e.colors.length]}function r(l){function i(){if(!!i.enabled){var u=i,f=+new Date,g=f-(n||f);u.diff=g,u.prev=n,u.curr=f,n=f;for(var c=new Array(arguments.length),h=0;h<c.length;h++)c[h]=arguments[h];c[0]=e.coerce(c[0]),typeof c[0]!="string"&&c.unshift("%O");var v=0;c[0]=c[0].replace(/%([a-zA-Z%])/g,function(y,p){if(y==="%%")return y;v++;var E=e.formatters[p];if(typeof E=="function"){var M=c[v];y=E.call(u,M),c.splice(v,1),v--}return y}),e.formatArgs.call(u,c);var m=i.log||e.log||console.log.bind(console);m.apply(u,c)}}return i.namespace=l,i.enabled=e.enabled(l),i.useColors=e.useColors(),i.color=a(l),typeof e.init=="function"&&e.init(i),i}function o(l){e.save(l),e.names=[],e.skips=[];for(var i=(typeof l=="string"?l:"").split(/[\s,]+/),u=i.length,f=0;f<u;f++)!i[f]||(l=i[f].replace(/\*/g,".*?"),l[0]==="-"?e.skips.push(new RegExp("^"+l.substr(1)+"$")):e.names.push(new RegExp("^"+l+"$")))}function d(){e.enable("")}function w(l){var i,u;for(i=0,u=e.skips.length;i<u;i++)if(e.skips[i].test(l))return!1;for(i=0,u=e.names.length;i<u;i++)if(e.names[i].test(l))return!0;return!1}function s(l){return l instanceof Error?l.stack||l.message:l}})(W,W.exports);(function(t,e){e=t.exports=W.exports,e.log=r,e.formatArgs=a,e.save=o,e.load=d,e.useColors=n,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:w(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(s){try{return JSON.stringify(s)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}};function a(s){var l=this.useColors;if(s[0]=(l?"%c":"")+this.namespace+(l?" %c":" ")+s[0]+(l?"%c ":" ")+"+"+e.humanize(this.diff),!!l){var i="color: "+this.color;s.splice(1,0,i,"color: inherit");var u=0,f=0;s[0].replace(/%[a-zA-Z%]/g,function(g){g!=="%%"&&(u++,g==="%c"&&(f=u))}),s.splice(f,0,i)}}function r(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(s){try{s==null?e.storage.removeItem("debug"):e.storage.debug=s}catch{}}function d(){var s;try{s=e.storage.debug}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=process.env.DEBUG),s}e.enable(d());function w(){try{return window.localStorage}catch{}}})(J,J.exports);var Z={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],t.exports=e.default})(Z,Z.exports);var H={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],t.exports=e.default})(H,H.exports);var K={exports:{}},X={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},t.exports=e.default})(X,X.exports);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=X.exports,a=r(n);function r(o){return o&&o.__esModule?o:{default:o}}e.default={pauseVideo:{acceptableStates:[a.default.ENDED,a.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[a.default.ENDED,a.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[a.default.ENDED,a.default.PLAYING,a.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},t.exports=e.default})(K,K.exports);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=J.exports,a=i(n),r=Z.exports,o=i(r),d=H.exports,w=i(d),s=K.exports,l=i(s);function i(g){return g&&g.__esModule?g:{default:g}}var u=(0,a.default)("youtube-player"),f={};f.proxyEvents=function(g){var c={},h=function(O){var _="on"+O.slice(0,1).toUpperCase()+O.slice(1);c[_]=function(C){u('event "%s"',_,C),g.trigger(O,C)}},v=!0,m=!1,y=void 0;try{for(var p=w.default[Symbol.iterator](),E;!(v=(E=p.next()).done);v=!0){var M=E.value;h(M)}}catch(x){m=!0,y=x}finally{try{!v&&p.return&&p.return()}finally{if(m)throw y}}return c},f.promisifyPlayer=function(g){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,h={},v=function(_){c&&l.default[_]?h[_]=function(){for(var C=arguments.length,D=Array(C),A=0;A<C;A++)D[A]=arguments[A];return g.then(function(S){var I=l.default[_],ce=S.getPlayerState(),re=S[_].apply(S,D);return I.stateChangeRequired||Array.isArray(I.acceptableStates)&&I.acceptableStates.indexOf(ce)===-1?new Promise(function(oe){var de=function ae(){var fe=S.getPlayerState(),ie=void 0;typeof I.timeout=="number"&&(ie=setTimeout(function(){S.removeEventListener("onStateChange",ae),oe()},I.timeout)),Array.isArray(I.acceptableStates)&&I.acceptableStates.indexOf(fe)!==-1&&(S.removeEventListener("onStateChange",ae),clearTimeout(ie),oe())};S.addEventListener("onStateChange",de)}).then(function(){return re}):re})}:h[_]=function(){for(var C=arguments.length,D=Array(C),A=0;A<C;A++)D[A]=arguments[A];return g.then(function(S){return S[_].apply(S,D)})}},m=!0,y=!1,p=void 0;try{for(var E=o.default[Symbol.iterator](),M;!(m=(M=E.next()).done);m=!0){var x=M.value;v(x)}}catch(O){y=!0,p=O}finally{try{!m&&E.return&&E.return()}finally{if(y)throw p}}return h},e.default=f,t.exports=e.default})(G,G.exports);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},a=pe,r=l(a),o=z.exports,d=l(o),w=G.exports,s=l(w);function l(u){return u&&u.__esModule?u:{default:u}}var i=void 0;e.default=function(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=(0,r.default)();if(i||(i=(0,d.default)(c)),f.events)throw new Error("Event handlers cannot be overwritten.");if(typeof u=="string"&&!document.getElementById(u))throw new Error('Element "'+u+'" does not exist.');f.events=s.default.proxyEvents(c);var h=new Promise(function(m){if((typeof u>"u"?"undefined":n(u))==="object"&&u.playVideo instanceof Function){var y=u;m(y)}else i.then(function(p){var E=new p.Player(u,f);return c.on("ready",function(){m(E)}),null})}),v=s.default.promisifyPlayer(h,g);return v.on=c.on,v.off=c.off,v},t.exports=e.default})($,$.exports);const Pe=ye($.exports);var le;const q=(le=new URL(location.href).searchParams.get("v"))!=null?le:"dQw4w9WgXcQ",T=Pe("player");T.loadVideoById(q);const j=document.getElementById("start-button"),ee=document.getElementById("end-button"),te=document.getElementById("reset-button"),_e=document.getElementById("clear-select-button"),k=document.getElementById("loop-list");let b=[],P=null,L=null;if(window.localStorage){const t=localStorage.getItem(q);t&&(b=JSON.parse(t),P=b[0].id)}else alert("Local save is not available in this browser.");N();Q();j.addEventListener("click",async()=>{L=await T.getCurrentTime(),Q()});ee.addEventListener("click",async()=>{const t=await T.getCurrentTime();if(typeof L=="number"&&L<t){const e=Math.random();b.push({id:e,range:[L,t],name:`#${b.length}`}),P=e,L=null,Q(),N(),B()}else alert("The end time is earlier than the start time.")});te.addEventListener("click",()=>{L=null,Q()});_e.addEventListener("click",()=>{P=null,ne()});function Q(){L===null?(j.style.display="unset",ee.style.display="none",te.style.display="none"):L!==null&&(j.style.display="none",ee.style.display="unset",te.style.display="unset")}function N(){const t=[];for(const a of b){const{id:r,name:o,range:[d,w]}=a,s=document.createElement("li"),l=document.createElement("div"),i=document.createElement("small"),u=document.createElement("u"),f=e(d);u.innerText=f,u.addEventListener("click",m=>{m.stopPropagation();const y=prompt("Please enter the start time.",f);try{const p=n(y);p<0||p>w?alert("The start time is later than the end time."):(a.range[0]=p,N(),B())}catch(p){p instanceof SyntaxError&&alert("Your input is not valid.")}});const g=e(w),c=document.createElement("u");c.innerText=g,c.addEventListener("click",m=>{m.stopPropagation();const y=prompt("Please enter the end time.",g);try{const p=n(y);p<0||p<d?alert("The end time is earlier than the start time."):(a.range[1]=p,N(),B())}catch(p){p instanceof SyntaxError&&alert("Your input is not valid.")}}),i.append(u," ~ ",c),l.append(o," ",i);const h=document.createElement("button");h.innerText="Rename";const v=document.createElement("button");v.innerText="Delete",s.append(l,h,v),s.addEventListener("click",()=>{P=P===r?null:r,ne()}),v.addEventListener("click",m=>{m.stopPropagation(),b=b.filter(y=>y.id!==r),r===P&&(P=null),N(),B()}),h.addEventListener("click",m=>{m.stopPropagation();const y=prompt("Please name this loop.");typeof y=="string"&&y.length>0?(a.name=y,N(),B()):alert("Your input is not valid.")}),t.push(s)}for(;k.firstChild;)k.removeChild(k.firstChild);k.append(...t),ne();function e(a){let r=[];if(a>3600&&r.push(Math.floor(a/3600).toFixed()),a>60){const o=a%3600;r.push(Math.floor(o/60).toFixed())}return r.push((a%60).toFixed(2)),r.join(":")}function n(a){const r=a.split(":").map(d=>Number(d));if(r.length<1||r.length>3||r.some(d=>Number.isNaN(d)))throw new SyntaxError;let o=r.pop();return r.length>0&&(o+=r.pop()*60),r.length>0&&(o+=r.pop()*3600),o}}function ne(){const t=document.getElementById("selected-loop");t&&(t.id="");const e=b.findIndex(n=>n.id===P);e>-1&&(k.children[e].id="selected-loop")}function B(){b.length>0?window.localStorage.setItem(q,JSON.stringify(b)):window.localStorage.removeItem(q)}setInterval(async()=>{if(!T||!T.getPlayerState)return;if(await T.getPlayerState()===1&&P!==null){const e=await T.getCurrentTime(),n=b.find(a=>a.id===P);if(n){const[a,r]=n.range;(e<a||r<e)&&T.seekTo(a)}}},80);
